apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    description: The custom resource definition for container backup support requests
      (also known as baas requests).
    displayName: BaasReq
  labels:
    app.kubernetes.io/component: baasreqs
    app.kubernetes.io/instance: ibm-spectrum-protect-plus-prod
    app.kubernetes.io/name: baas
    app.kubernetes.io/version: 10.1.8.2
  name: baasreqs.baas.io
spec:
  conversion:
    strategy: None
  group: baas.io
  names:
    kind: BaaSReq
    listKind: BaaSReqList
    plural: baasreqs
    singular: baasreq
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: Specifications for a baas request.
            x-kubernetes-preserve-unknown-fields: true
            properties:
              pvcname:
                description: The name of the PVC. Used for the ONDEMANDBACKUP and
                  RESTORE request types.
                type: string
              requesttype:
                description: "The type of baas request. The following types are supported
                  and are case-insensitive:\nBackup - Schedule a backup operation
                  for a PVC.\nRestore - Restore a PVC from a snapshot backup or a
                  copy backup.\nDestroy - Delete all snapshot and copy backups and
                  mark the scheduled job as destroyed.\nOnDemandBackup - Request an
                  immediate snapshot backup of the PVC.\nBackupNamespace - Schedule
                  a backup operation for PVCs in the specified namespace.\nBackupLabel
                  - Schedule a backup operation for PVCs with the specified label.\n
                  \              \nBackupResources - Schedule a backup operation for
                  resources in the cluster or specified namespace.\nOnDemandBackupResources
                  - Request an immediate backup of the resources in the cluster or
                  specified namespace.\nRestoreResources - Request an immediate, on
                  demand restore of the resources in the cluster or specified namespace.\n"
                pattern: ^(?i)(BACKUP|RESTORE|DESTROY|ONDEMANDBACKUP|BACKUPNAMESPACE|BACKUPLABEL|BACKUPRESOURCES|ONDEMANDBACKUPRESOURCES|RESTORERESOURCES)$
                type: string
              restorepoint:
                description: |
                  The time stamp of the source snapshot or copy backup that you want to restore from. The time stamp is in
                  Coordinated Universal Time (UTC) format. If you do not specify a time stamp, the most recent snapshot or copy backup is restored.
                  Used for the RESTORE request type.
                type: string
              restoretype:
                description: |
                  The type of restore operation to use. The following types are supported and are case-insensitive:
                  Fast - Restores a volume from a snapshot backup.
                  Copy - Restores a volume from a copy backup.
                pattern: ^(?i)(FAST|COPY)$
                type: string
              scope:
                description: |
                  The scope of the resources to be backed up. The following types are supported and are case-insensitive:
                  Cluster - Assignes cluster scoped resources to the given SLA(s)
                  Namespace - Assignes namespace scoped resources for the given namespace to the given SLA(s)
                pattern: ^(?i)(CLUSTER|NAMESPACE)$
                type: string
              sla:
                description: |
                  The name of the service level agreement (SLA) policy that determines the schedule for backup operations.
                  Used for BACKUP and ONDEMANDBACKUP request types.
                  To show the available SLA policies, enter the following command
                  kubectl describe configmap baas-sla -n baas
                  If an SLA policy has not been created by the storage administrator, the output will be empty.
                type: array
                items:
                  type: string
              targetvolume:
                description: |
                  The name of the PVC that you want to restore the volume to. Used for the Restore request type.
                  For fast restores, the volume is always restored to a new PVC. In this case, provide the name of the new PVC.
                  For copy restores, you can restore the volume to the original or new PVC. If you are restoring a copy backup to a new persistent
                  volume, the PVC for the new volume is automatically created when you restore the copy backup. Except for the original location,
                  the restore fails if you specify a PVC that already exists.
                type: string
              volumesnapshotclass:
                description: |
                  The snapshot class for snapshot backups. If you do not specify the snapshot class, the default snapshot
                  class is used if the snapshotter in the default snapshot class matches the provisioner of the volume.
                  Otherwise, the backup request is invalid.
                type: string
            required:
            - requesttype
            type: object
        type: object
        x-kubernetes-preserve-unknown-fields: true
    served: true
    storage: true
